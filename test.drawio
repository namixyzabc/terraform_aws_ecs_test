<mxGraphModel>
  <root>
    <!-- デフォルトの親セル -->
    <mxCell id="0" />
    <mxCell id="1" parent="0" />

    <!-- コンテナ: VPC -->
    <mxCell id="n12" value="VPC" style="swimlane;fillColor=#ffffff;strokeColor=#000000;" parent="1">
      <mxGeometry x="100" y="380" width="600" height="420" as="geometry" />
    </mxCell>

    <!-- コンテナ: Public Subnet -->
    <mxCell id="n13" value="Public Subnet" style="swimlane;fillColor=#ccffcc;strokeColor=#000000;" parent="n12">
      <mxGeometry x="0" y="0" width="600" height="120" as="geometry" />
    </mxCell>

    <!-- コンテナ: Private Subnet -->
    <mxCell id="n14" value="Private Subnet" style="swimlane;fillColor=#ccffcc;strokeColor=#000000;" parent="n12">
      <mxGeometry x="0" y="120" width="600" height="300" as="geometry" />
    </mxCell>

    <!-- ノード: VPC外 -->
    <mxCell id="n1" value="Browser" style="shape=mxgraph.aws4.web_browser;fillColor=#ffffff;strokeColor=#000000;" parent="1">
      <mxGeometry x="400" y="50" width="100" height="50" as="geometry" />
    </mxCell>
    <mxCell id="n2" value="Cloudflare" style="shape=mxgraph.security.shield;fillColor=#ffffff;strokeColor=#000000;" parent="1">
      <mxGeometry x="400" y="120" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n3" value="AWS Cloud" style="shape=mxgraph.aws4.cloud;fillColor=#ffffff;strokeColor=#000000;" parent="1">
      <mxGeometry x="50" y="50" width="100" height="100" as="geometry" />
    </mxCell>
    <mxCell id="n4" value="Amplify" style="shape=mxgraph.aws4.amplify;fillColor=#ff0000;strokeColor=#000000;" parent="1">
      <mxGeometry x="50" y="170" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n5" value="53 (DNS)" style="shape=mxgraph.aws4.route_53;fillColor=#ffffff;strokeColor=#000000;" parent="1">
      <mxGeometry x="400" y="200" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n6" value="WAF" style="shape=mxgraph.aws4.waf;fillColor=#ff0000;strokeColor=#000000;" parent="1">
      <mxGeometry x="400" y="280" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n7" value="ACM" style="shape=mxgraph.aws4.certificate_manager;fillColor=#ffffff;strokeColor=#000000;" parent="1">
      <mxGeometry x="400" y="360" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n8" value="S3" style="shape=mxgraph.aws4.s3;fillColor=#00ff00;strokeColor=#000000;" parent="1">
      <mxGeometry x="500" y="280" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n9" value="ECR" style="shape=mxgraph.aws4.ecr;fillColor=#ffa500;strokeColor=#000000;" parent="1">
      <mxGeometry x="500" y="360" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n15" value="Developer" style="shape=mxgraph.aws4.user;fillColor=#ffffff;strokeColor=#000000;" parent="1">
      <mxGeometry x="50" y="260" width="60" height="60" as="geometry" />
    </mxCell>
    <mxCell id="n16" value="Systems Manager" style="shape=mxgraph.aws4.systems_manager;fillColor=#ff69b4;strokeColor=#000000;" parent="1">
      <mxGeometry x="50" y="330" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n17" value="Secrets Manager" style="shape=mxgraph.aws4.secrets_manager;fillColor=#ff69b4;strokeColor=#000000;" parent="1">
      <mxGeometry x="50" y="410" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n18" value="CloudWatch Logs" style="shape=mxgraph.aws4.cloudwatch;fillColor=#ff69b4;strokeColor=#000000;" parent="1">
      <mxGeometry x="50" y="490" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n19" value="Dockerイメージ" style="shape=mxgraph.aws4.docker;fillColor=#0000ff;strokeColor=#000000;" parent="1">
      <mxGeometry x="700" y="280" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n20" value="NAT" style="shape=mxgraph.aws4.nat_gateway;fillColor=#0000ff;strokeColor=#000000;" parent="1">
      <mxGeometry x="700" y="360" width="80" height="80" as="geometry" />
    </mxCell>

    <!-- ノード: Public Subnet内 -->
    <mxCell id="n10" value="IGW" style="shape=mxgraph.aws4.internet_gateway;fillColor=#ffffff;strokeColor=#000000;" parent="n13">
      <mxGeometry x="100" y="20" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n11" value="ALB" style="shape=mxgraph.aws4.application_load_balancer;fillColor=#0000ff;strokeColor=#000000;" parent="n13">
      <mxGeometry x="400" y="20" width="80" height="80" as="geometry" />
    </mxCell>

    <!-- ノード: Private Subnet内 -->
    <mxCell id="n21" value="ECS" style="shape=mxgraph.aws4.ecs;fillColor=#ffa500;strokeColor=#000000;" parent="n14">
      <mxGeometry x="200" y="50" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n22" value="API Gateway" style="shape=mxgraph.aws4.api_gateway;fillColor=#800080;strokeColor=#000000;" parent="n14">
      <mxGeometry x="200" y="130" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n23" value="Lambda" style="shape=mxgraph.aws4.lambda;fillColor=#ffa500;strokeColor=#000000;" parent="n14">
      <mxGeometry x="200" y="210" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n24" value="RDS Proxy" style="shape=mxgraph.aws4.rds_proxy;fillColor=#0000ff;strokeColor=#000000;" parent="n14">
      <mxGeometry x="200" y="290" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n25" value="RDS" style="shape=mxgraph.aws4.rds;fillColor=#0000ff;strokeColor=#000000;" parent="n14">
      <mxGeometry x="200" y="370" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n26" value="ElastiCache (redis)" style="shape=mxgraph.aws4.elasticache;fillColor=#ff0000;strokeColor=#000000;" parent="n14">
      <mxGeometry x="400" y="370" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n27" value="Eventbridge" style="shape=mxgraph.aws4.eventbridge;fillColor=#ff69b4;strokeColor=#000000;" parent="n14">
      <mxGeometry x="50" y="130" width="80" height="80" as="geometry" />
    </mxCell>
    <mxCell id="n28" value="SQS" style="shape=mxgraph.aws4.sqs;fillColor=#ff69b4;strokeColor=#000000;" parent="n14">
      <mxGeometry x="50" y="210" width="80" height="80" as="geometry" />
    </mxCell>

    <!-- エッジ: 接続 -->
    <mxCell id="e1" edge="1" source="n1" target="n2" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e2" edge="1" source="n2" target="n5" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e3" edge="1" source="n5" target="n6" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e4" edge="1" source="n6" target="n7" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e5" edge="1" source="n7" target="n8" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e6" edge="1" source="n8" target="n9" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e7" edge="1" source="n6" target="n10" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e8" edge="1" source="n7" target="n10" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e9" edge="1" source="n10" target="n11" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e10" edge="1" source="n11" target="n21" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e11" edge="1" source="n15" target="n16" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e12" edge="1" source="n16" target="n17" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e13" edge="1" source="n17" target="n18" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e14" edge="1" source="n17" target="n21" style="dashed=1;edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e15" edge="1" source="n9" target="n19" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e16" edge="1" source="n20" target="n21" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e17" edge="1" source="n21" target="n22" value="APIGW→GO" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e18" edge="1" source="n22" target="n23" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e19" edge="1" source="n23" target="n24" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e20" edge="1" source="n24" target="n25" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e21" edge="1" source="n25" target="n26" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e22" edge="1" source="n21" target="n27" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e23" edge="1" source="n27" target="n28" style="edgeStyle=orthogonalEdgeStyle;" parent="1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- テキストラベル: SSL証明書 -->
    <mxCell id="t1" value="SSL証明書" style="text;html=1;strokeColor=none;fillColor=none;" parent="1">
      <mxGeometry x="180" y="420" width="100" height="20" as="geometry" />
    </mxCell>
  </root>
</mxGraphModel>